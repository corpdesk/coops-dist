(self.webpackChunkcoops=self.webpackChunkcoops||[]).push([[615],{60615:(S,v,a)=>{a.r(v),a.d(v,{AdminModule:()=>E});var s=a(35228),o=a(30533),t=a(83781),C=a(76380),p=a(92618),g=a(59707),T=a(15006),y=a(7444),e=a(47512),n=a(61052),d=a(37011),f=a(33635);const b=new e.FormsService,F=[{title:"ID",name:"companyId",dbName:"company_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum"},{title:"Guid",name:"companyGuid",dbName:"company_guid",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Name",name:"companyName",dbName:"company_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(80),o.Validators.required]]},{title:"Tags",name:"searchTags",dbName:"search_tags",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.textArea,fieldFor:e.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(0),o.Validators.maxLength(300)]]},{title:"CompanyType",name:"companyTypeGuid",dbName:"company_type_guid",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.searchDropDown,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,f.of)([]),selValueField:"companyName",selIndex:"companyTypeGuid",selPlaceholder:"...Choose",data:null},formatt:"text",disabled:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(42),o.Validators.required]]},{title:"Postal",name:"postalAddress",dbName:"postal_address",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(1),o.Validators.maxLength(20),o.Validators.required]]},{title:"Phone",name:"phone",dbName:"phone",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(8),o.Validators.maxLength(80),o.Validators.required]]},{title:"Mobile",name:"mobile",dbName:"mobile",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(8),o.Validators.maxLength(24),o.Validators.required]]},{title:"Email",name:"email",dbName:"email",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.pattern(e.EMAIL_PATTERN),o.Validators.required]]},{title:"Website",name:"website",dbName:"website",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.pattern(e.URL_PATTERN),o.Validators.required]]},{title:"City",name:"city",dbName:"city",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(20),o.Validators.required]]},{title:"Country",name:"country",dbName:"country",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(20),o.Validators.required]]},{title:"Location",name:"physicalLocation",dbName:"physical_location",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(1),o.Validators.maxLength(80),o.Validators.required]]},{title:"Logo",name:"logo",dbName:"logo",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(20),o.Validators.required]]},{title:"Enabled",name:"companyEnabled",dbName:"company_enabled",type:e.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.status,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Action",name:"action",type:e.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:e.ControlType.action,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.action,fieldFor:e.FieldFor.createForm}],Fn:"createCompany"},{title:"Search",name:"iconSearch",type:e.FieldType.any,controls:[],formControlsConfig:["",[]]}],I={data:{},valid:null,ctx:"Sys"},m={token:"",stepTitle:"Create Company",stepItems:{nextButtonId:"stepToMenu"},tabPaneId:"companyInfo",cardTitle:"Company Information",cardTitleDesc:"Fill all information below",module:"Moduleman",controller:"Company",formGroup:null,fields:b.filterByFieldFor(F,e.FieldFor.createForm)},G={name:"Company Wizard",steps:[m]},L={select:["companyTypeId","companyTypeName","companyTypeGuid"],where:{}},A={getFn$:null,selIndex:L.select[2],selValueField:L.select[1],fetchFields:L.select,step:null,token:null,controlName:"companyTypeGuid"},$=[{menuName:"create",menuGuid:"bd9b5bda5ab",navLocation:"/moduleman/company/create",actionType:e.ActionType.navigate},{menuName:"dashboard",menuGuid:"d27294db59c1",navLocation:"/moduleman/company/dashboard",actionType:e.ActionType.navigate}];var l=a(87675);class P{constructor(r,i,c,u,D,N,M){this.aRoute=r,this.router=i,this.svBase=c,this.svNazTable=u,this.svAcl=D,this.svPage=N,this.svSess=M,this.dSource={fields:[],data:[]},this.cardTitle="Company",this.cardBodyId="company",this.searchInputId="inputSearchCompany",this.filter={},this.tpData=e.DEFAULT_TPD,this.ddlData=$,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(r=>{r&&this.svAcl.initComponent(r,this,this.svSess).then(i=>{})})}init(){this.baseModel=new e.BaseModel(m.module,m.controller),this.svBase.module=m.module,this.svBase.controller=m.controller,this.baseModel.data.fields=F.filter(r=>r.fetchable||r.type===e.FieldType.action),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(m.controller,"List"),this.sQuery=this.svNazTable.initSQuery(this),this.dsEmittData=this.svNazTable.initEmittData(this)}execQuery(r){this.svNazTable.execQuery(r,this.svBase.getPaged$(this.sQuery,this.baseModel.sess.cd_token),this)}setSearchQuery(r){this.sQuery=r.sQuery,this.execQuery(r)}getSelect(){return this.baseModel.data.fields.filter(r=>r.fetchable).map(r=>r.name)}}P.\u0275fac=function(r){return new(r||P)(l.\u0275\u0275directiveInject(d.ActivatedRoute),l.\u0275\u0275directiveInject(d.Router),l.\u0275\u0275directiveInject(e.BaseService),l.\u0275\u0275directiveInject(n.NazTableService),l.\u0275\u0275directiveInject(e.AclService),l.\u0275\u0275directiveInject(n.PageService),l.\u0275\u0275directiveInject(e.SessService))},P.\u0275cmp=l.\u0275\u0275defineComponent({type:P,selectors:[["app-list"]],viewQuery:function(r,i){if(1&r&&l.\u0275\u0275viewQuery(n.NazTableComponent,5),2&r){let c;l.\u0275\u0275queryRefresh(c=l.\u0275\u0275loadQuery())&&(i.nazTable=c.first)}},decls:2,vars:0,template:function(r,i){1&r&&(l.\u0275\u0275elementStart(0,"p"),l.\u0275\u0275text(1,"admin-is-working"),l.\u0275\u0275elementEnd())}});var j=a(15861);class V{constructor(r,i,c,u,D,N,M){this.aRoute=r,this.router=i,this.svBase=c,this.svPage=u,this.svSess=D,this.svAcl=N,this.svNotif=M,this.formConfig={},this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(r=>{this.svAcl.initComponent(r,this,this.svSess).then(i=>{})})}init(){this.baseModel=new e.BaseModel(m.module,m.controller),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(m.controller,"Edit"),this.baseModel.data.subTitle="only allowed fields are editable"}update(r){var i=this;return(0,j.Z)(function*(){i.svBase.update$(r,i.baseModel.token).subscribe(c=>{i.svNotif.emitNotif({pushRecepients:e.DEFAULT_PUSH_RECEPIENTS,pushData:c,emittEvent:"push-notif",triggerEvent:"send-notif",req:null,resp:c})})})()}}V.\u0275fac=function(r){return new(r||V)(l.\u0275\u0275directiveInject(d.ActivatedRoute),l.\u0275\u0275directiveInject(d.Router),l.\u0275\u0275directiveInject(e.BaseService),l.\u0275\u0275directiveInject(n.PageService),l.\u0275\u0275directiveInject(e.SessService),l.\u0275\u0275directiveInject(e.AclService),l.\u0275\u0275directiveInject(e.NotificationService))},V.\u0275cmp=l.\u0275\u0275defineComponent({type:V,selectors:[["app-edit"]],decls:1,vars:2,consts:[[3,"baseModel","pageDescription","formConfig","updateQuery"]],template:function(r,i){1&r&&(l.\u0275\u0275elementStart(0,"naz-table-edit",0),l.\u0275\u0275listener("updateQuery",function(u){return i.update(u)}),l.\u0275\u0275elementEnd()),2&r&&l.\u0275\u0275property("baseModel",i.baseModel)("formConfig",i.formConfig)},dependencies:[n.EditComponent]});class w{constructor(r,i,c,u,D,N,M){this.aRoute=r,this.router=i,this.svBase=c,this.svPage=u,this.svAcl=D,this.svNotif=N,this.svSess=M,this.formConfig={},this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(r=>{this.svAcl.initComponent(r,this,this.svSess).then(i=>{})})}init(){this.baseModel=new e.BaseModel(m.module,m.controller),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(m.controller,"Delete"),this.baseModel.data.subTitle="confirm before delete"}deleteItem(r){var i=this;return(0,j.Z)(function*(){i.svBase.delete$(r,i.baseModel.token).subscribe(c=>{i.svNotif.emitNotif({pushRecepients:e.DEFAULT_PUSH_RECEPIENTS,pushData:c,emittEvent:"push-notif",triggerEvent:"send-notif",req:null,resp:c})})})()}}w.\u0275fac=function(r){return new(r||w)(l.\u0275\u0275directiveInject(d.ActivatedRoute),l.\u0275\u0275directiveInject(d.Router),l.\u0275\u0275directiveInject(e.BaseService),l.\u0275\u0275directiveInject(n.PageService),l.\u0275\u0275directiveInject(e.AclService),l.\u0275\u0275directiveInject(e.NotificationService),l.\u0275\u0275directiveInject(e.SessService))},w.\u0275cmp=l.\u0275\u0275defineComponent({type:w,selectors:[["app-delete"]],decls:1,vars:2,consts:[[3,"baseModel","pageDescription","formConfig","deleteQuery"]],template:function(r,i){1&r&&(l.\u0275\u0275elementStart(0,"naz-table-delete",0),l.\u0275\u0275listener("deleteQuery",function(u){return i.deleteItem(u)}),l.\u0275\u0275elementEnd()),2&r&&l.\u0275\u0275property("baseModel",i.baseModel)("formConfig",i.formConfig)},dependencies:[n.DeleteComponent]});const z=new e.FormsService,B=[{title:"ID",name:"userId",dbName:"user_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum"},{title:"Guid",name:"userGuid",dbName:"user_guid",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Name",name:"userName",dbName:"user_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(20),o.Validators.required]]},{title:"Password",name:"password",dbName:"password",type:e.FieldType.string,fetchable:!1,updateable:!1,searchable:!1,show:!1,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(20),o.Validators.required,o.Validators.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$")]]},{title:"ConfirmPassword",name:"confirmPassword",dbName:"confirmPassword",type:e.FieldType.string,fetchable:!1,updateable:!1,searchable:!1,show:!1,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!1,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(20),o.Validators.required,o.Validators.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$")]]},{title:"F.Name",name:"fName",dbName:"f_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(20),o.Validators.required]]},{title:"M.Name",name:"mName",dbName:"m_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(20),o.Validators.required]]},{title:"L.Name",name:"lName",dbName:"l_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(20),o.Validators.required]]},{title:"NID",name:"nationalId",dbName:"national_id",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(20),o.Validators.required]]},{title:"PID",name:"passportId",dbName:"passport_id",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(20),o.Validators.required]]},{title:"Postal",name:"postalAddress",dbName:"postal_address",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(1),o.Validators.maxLength(20),o.Validators.required]]},{title:"Mobile",name:"mobile",dbName:"mobile",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(8),o.Validators.maxLength(14),o.Validators.required]]},{title:"Email",name:"email",dbName:"email",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[o.Validators.pattern(e.EMAIL_PATTERN),o.Validators.required]]},{title:"Company",name:"companyId",dbName:"company_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.searchDropDown,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,f.of)([]),selValueField:"companyName",selIndex:"companyId",selPlaceholder:"...Choose",data:null},formatt:"text",disabled:!0,savable:!0,formControlsConfig:["",[o.Validators.minLength(3),o.Validators.maxLength(42),o.Validators.required]]},{title:"Gender",name:"gender",dbName:"gender",type:e.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.status,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Enabled",name:"userEnabled",dbName:"user_enabled",type:e.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.status,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Action",name:"action",type:e.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:e.ControlType.action,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.action,fieldFor:e.FieldFor.createForm}],Fn:"createUser"},{title:"Search",name:"iconSearch",type:e.FieldType.any,controls:[],formControlsConfig:["",[]]}];z.filterByFieldFor(B,e.FieldFor.createForm);var W=a(6649),k=a(51557);class _{constructor(r,i,c,u){this.svBase=r,this.svModule=i,this.svCompany=c,this.svCoops=u}loadDdls(r,i){var c=this;return(0,j.Z)(function*(){W.tL.token=r.token,A.token=r.token,A.step=i,A.controlName="companyTypeGuid",console.log("coops/CompanyFrontService::loadDdls()/companyTypeGetQuery:",L),A.getFn$=c.svCompany.getCompanyType$(L,r.token),yield c.svCoops.setDdl$(yield A).subscribe(u=>{console.log("coops/CompanyFrontService::loadDdls()/ret(companyTypes):",u),i.fields.forEach(D=>{"companyTypeGuid"===D.name&&(D.ddlInfo.data=u)})})})()}}_.\u0275fac=function(r){return new(r||_)(l.\u0275\u0275inject(e.BaseService),l.\u0275\u0275inject(e.ModuleService),l.\u0275\u0275inject(e.CompanyService),l.\u0275\u0275inject(k.o))},_.\u0275prov=l.\u0275\u0275defineInjectable({token:_,factory:_.\u0275fac,providedIn:"root"});class R{constructor(r,i,c,u,D,N,M,H,Z,q,X,Y,J){this.aRoute=r,this.router=i,this.svCompanyFront=c,this.svAcl=u,this.svForm=D,this.svNotif=N,this.fb=M,this.svForms=H,this.svPage=Z,this.svPush=q,this.svBase=X,this.svSess=Y,this.svCompany=J,this.newCompany=I,this.wizardModel=G,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(r=>{this.svAcl.initComponent(r,this,this.svSess).then(i=>{i&&(this.svPush.init(this),this.baseModel.data.step.token=this.baseModel.token)})})}ngAfterViewInit(){this.svCompanyFront.loadDdls(this.baseModel,this.baseModel.data.step).then(r=>{console.log("company/CreateComponent::ngAfterViewInit()/this.baseModel.data.step:",this.baseModel.data.step)})}init(){this.baseModel=new e.BaseModel(m.module,m.controller),this.baseModel.data.fields=this.svForms.filterByFieldFor(B,e.FieldFor.createForm),this.baseModel.data.wizardModel=G,this.baseModel.data.step=this.svForm.filterStepsByController(this.baseModel.data.wizardModel,m.controller)[0],this.baseModel.data.form=this.fb.group(this.svForm.getFormControlConfig(B)),this.baseModel.data.step.formGroup=this.baseModel.data.form,this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(m.controller,"Create")}setSelectedIcon(r){this.svForm.setSelectedIcon(r,this.baseModel,this.baseModel.data.step)}save(r){let i;switch(console.log("starting modules/moduleman/company/CreateComponent::save():"),r.controller){case"module":case"menu":break;case"Company":console.log("modules/moduleman/company/CreateComponent::save()/this.newCompany:",this.newCompany),i=this.svCompany.createCompany$(this.newCompany,this.baseModel.token),this.svForm.saveForm(r,this.newCompany,i,this.svPush.pushEnvelop,this.svNotif)}}finishFunction(){console.log("finishing!!")}}R.\u0275fac=function(r){return new(r||R)(l.\u0275\u0275directiveInject(d.ActivatedRoute),l.\u0275\u0275directiveInject(d.Router),l.\u0275\u0275directiveInject(_),l.\u0275\u0275directiveInject(e.AclService),l.\u0275\u0275directiveInject(e.FormsService),l.\u0275\u0275directiveInject(e.NotificationService),l.\u0275\u0275directiveInject(o.FormBuilder),l.\u0275\u0275directiveInject(e.FormsService),l.\u0275\u0275directiveInject(n.PageService),l.\u0275\u0275directiveInject(e.CdPushService),l.\u0275\u0275directiveInject(e.BaseService),l.\u0275\u0275directiveInject(e.SessService),l.\u0275\u0275directiveInject(e.CompanyService))},R.\u0275cmp=l.\u0275\u0275defineComponent({type:R,selectors:[["app-create"]],decls:1,vars:2,consts:[[3,"baseModel","wizardModel","saveEmitter","relaySelIconEmitter"]],template:function(r,i){1&r&&(l.\u0275\u0275elementStart(0,"naz-table-create",0),l.\u0275\u0275listener("saveEmitter",function(u){return i.save(u)})("relaySelIconEmitter",function(u){return i.setSelectedIcon(u)}),l.\u0275\u0275elementEnd()),2&r&&l.\u0275\u0275property("baseModel",i.baseModel)("wizardModel",i.wizardModel)},dependencies:[n.CreateComponent]});var Q=a(47076);const K=[{path:"list",component:P},{path:"edit",component:V},{path:"delete",component:w},{path:"create",component:R},{path:"dashboard",component:Q.M}];class x{constructor(r){this.router=r,r.events.subscribe(i=>{console.log("Coops::AdminRoutingModule::constructor()/routeState:",i)})}}x.\u0275fac=function(r){return new(r||x)(l.\u0275\u0275inject(d.Router))},x.\u0275mod=l.\u0275\u0275defineNgModule({type:x}),x.\u0275inj=l.\u0275\u0275defineInjector({imports:[d.RouterModule.forChild(K),d.RouterModule]});class E{}E.\u0275fac=function(r){return new(r||E)},E.\u0275mod=l.\u0275\u0275defineNgModule({type:E}),E.\u0275inj=l.\u0275\u0275defineInjector({imports:[s.CommonModule,o.FormsModule,o.ReactiveFormsModule,C.NgbNavModule,C.NgbDropdownModule,C.NgbTooltipModule,C.NgbAccordionModule,n.NazUiModule,n.NazTableModule,n.NazCreateModule,n.NazEditModule,n.NazDeleteModule,p.Ng2SearchPipeModule,g.ArchwizardModule,T.NgToggleModule,x,t.NgSelectModule,e.BaseModule.forChild(y.N),e.CdPushModule.forChild(y.N)]})},51557:(S,v,a)=>{a.d(v,{o:()=>y});var s=a(33635),t=a(87675),p=a(47512);class y{constructor(n,d,f){this.svMenu=n,this.svNotif=d,this.svForm=f,this.ddlData={config:{suppressScrollX:!0,wheelSpeed:.3},header:{title:{lable:"Notifications",cls:"",action:null},sideLink:{lable:"View All",cls:"",action:null}},footer:{label:"View All",icon:"",action:null},data:[{label:"item 1",description:"If several languages coalesce the grammar",time:"3 min ago"},{label:"item 2",description:"It will seem like simplified English",time:"1 hr ago"},{label:"item 3",description:"If several languages coalesce the grammar",time:"4 hr ago"}]},this.pushEnvelop={pushRecepients:[],pushData:null,emittEvent:"push-notif",triggerEvent:"send-notif",req:null,resp:null},this.numericNumberReg1="^-?[0-9]\\d*(\\.\\d{1,2})?$",this.numericNumberReg2="/^[0-9]d*$/",this.numericNumberReg3=new RegExp(/^-?[0-9]\\d*(\\.\\d{1,2})?$/,"i"),this.numericNumberReg4=new RegExp(/^[0-9]\d*$/,"i")}setIconsData$(n,d){n.fields.map((f,b)=>{f.name===d&&(n.fields[b].ddlInfo.selData$=(0,s.of)(this.ddlData),n.fields[b].ddlInfo.selIndex="iconId",n.fields[b].ddlInfo.selValueField="iconName",n.fields[b].ddlInfo.selPlaceholder="...Choose")})}setDdl$(n){if(n.token){const d=new s.Subject;let f=[];return n.getFn$.subscribe(b=>{const F=b;console.log("ModulemanService::setDdl$()/response:",F),console.log("ModulemanService::setDdl$()/ddlCtx.step.fields:",n.step),F.app_state.success?(f=F.data.items,n.step.fields.map((I,m)=>{console.log("ModulemanService::setDdl$()/f.name1:",I.name),console.log("ModulemanService::setDdl$()/ddlCtx.controlName:",n.controlName),console.log("ModulemanService::setDdl$()/f:",I),I.name===n.controlName&&"ddlInfo"in I&&(console.log("ModulemanService::setDdl$()/f.name2:",I.name),n.step.fields[m].ddlInfo.selData$=(0,s.of)(F.data.items),n.step.fields[m].ddlInfo.selIndex=n.selIndex,n.step.fields[m].ddlInfo.selValueField=n.selValueField,n.step.fields[m].ddlInfo.selPlaceholder="...Choose")}),d.next(f)):(this.pushEnvelop.pushData=F,this.pushEnvelop.resp=F,this.svNotif.emitNotif(this.pushEnvelop),d.next(f))}),d.asObservable()}return(0,s.of)([])}}y.\u0275fac=function(n){return new(n||y)(t.\u0275\u0275inject(p.MenuService),t.\u0275\u0275inject(p.NotificationService),t.\u0275\u0275inject(p.FormsService))},y.\u0275prov=t.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac,providedIn:"root"})},4368:(S,v,a)=>{a.d(v,{AO:()=>I,Cq:()=>f,NG:()=>e,hA:()=>y,i0:()=>b,kx:()=>n,ni:()=>F,pt:()=>d});var s=a(30533),t=a(47512),p=a(33635);const T=new t.FormsService,y=[{title:"ID",name:"menuId",dbName:"menu_id",type:t.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay}],formatt:"number",disabled:!0,formControlsConfig:["",[]]},{title:"Guid",name:"menuGuid",dbName:"menu_guid",type:t.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Label",name:"menuLabel",dbName:"menu_label",type:t.FieldType.string,fetchable:!0,updateable:!1,searchable:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Name",name:"menuName",dbName:"menu_name",type:t.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay},{controlType:t.ControlType.text,fieldFor:t.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[s.Validators.minLength(3),s.Validators.maxLength(25),s.Validators.required]]},{title:"MenuParent",name:"menuParentId",dbName:"menu_parent_id",type:t.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay},{controlType:t.ControlType.searchDropDown,fieldFor:t.FieldFor.createForm}],ddlInfo:{selData$:(0,p.of)([]),selValueField:"menuName",selIndex:"menuId",selPlaceholder:"...Choose",data:null},formatt:"number",disabled:!0,savable:!0,formControlsConfig:["",[s.Validators.required]]},{title:"ModuleParent",name:"moduleId",dbName:"module_id",primaryField:"menuParent",type:t.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay},{controlType:t.ControlType.searchDropDown,fieldFor:t.FieldFor.createForm}],ddlInfo:{selData$:(0,p.of)([]),selValueField:"moduleName",selIndex:"moduleId",selPlaceholder:"...Choose",data:null},formatt:"number",disabled:!0,savable:!0,formControlsConfig:["",[s.Validators.required]]},{title:"Description",name:"menuDescription",dbName:"menu_description",type:t.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay},{controlType:t.ControlType.textArea,fieldFor:t.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[s.Validators.minLength(0),s.Validators.maxLength(300)]]},{title:"Icon",name:"menuIcon",dbName:"menu_icon",type:t.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay},{controlType:t.ControlType.ddlIcons,fieldFor:t.FieldFor.createForm}],ddlInfo:{selData$:(0,p.of)([]),selValueField:"iconName",selIndex:"iconId",selPlaceholder:"...choose",ddlIconId:"iconDdlIdX",searchInputId:"searchInputIdX",searchInputName:"searchInputNameX",selectedValue:"",data:null},formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[s.Validators.minLength(2),s.Validators.maxLength(50),s.Validators.required]]},{title:"Path",name:"path",dbName:"path",type:t.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay},{controlType:t.ControlType.text,fieldFor:t.FieldFor.createForm}],formatt:"text",formControlsConfig:["",[s.Validators.minLength(3),s.Validators.maxLength(100),s.Validators.required]]},{title:"Action",name:"action",type:t.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:t.ControlType.action,fieldFor:t.FieldFor.tableDisplay},{controlType:t.ControlType.action,fieldFor:t.FieldFor.createForm}],Fn:"createMenu"},{title:"Search",name:"iconSearch",type:t.FieldType.any,controls:[],formControlsConfig:["",[]]}],e={data:{},cdObj:null,valid:null,ctx:"Sys"},n=[{toReplace:"menuLabel",replaceWith:"menuName"}],d={token:"",stepTitle:"Create Menu",stepItems:{prevButtonId:"stepToModule",lastButtonId:"endSteps"},tabPaneId:"menuInfo",cardTitle:"Menu Information",cardTitleDesc:"Every module has to have at least one menu item. You can use the + button to add more items.",module:"moduleman",controller:"menu",formGroup:null,fields:T.filterByFieldFor(y,t.FieldFor.createForm)},f={name:"Menu Wizard",steps:[d]},b={select:["menuId","menuName","menuGuid"],where:{}},F={getFn$:null,selIndex:b.select[0],selValueField:b.select[1],fetchFields:b.select,step:null,token:null,controlName:"menuParentId"},I=[{menuName:"create",menuGuid:"bd9b5bda6ab",navLocation:"/moduleman/menu/create",actionType:t.ActionType.navigate},{menuName:"dashboard",menuGuid:"d27294db69c1",navLocation:"/moduleman/menu/dashboard",actionType:t.ActionType.navigate}]},6649:(S,v,a)=>{a.d(v,{AO:()=>b,GZ:()=>f,Qx:()=>T,Rf:()=>e,c_:()=>d,qh:()=>F,tL:()=>I,vk:()=>y});var s=a(30533),t=a(47512),p=a(4368);const g=new t.FormsService,T=[{title:"ID",name:"moduleId",dbName:"module_id",type:t.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay}],formatt:"number",disabled:!0},{title:"Guid",name:"moduleGuid",dbName:"module_guid",type:t.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Name",name:"moduleName",dbName:"module_name",type:t.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay},{controlType:t.ControlType.text,fieldFor:t.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[s.Validators.minLength(4),s.Validators.maxLength(20),s.Validators.required]]},{title:"Description",name:"moduleDescription",dbName:"module_description",type:t.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay},{controlType:t.ControlType.textArea,fieldFor:t.FieldFor.createForm}],formatt:"textArea",savable:!0,formControlsConfig:["",[s.Validators.minLength(0),s.Validators.maxLength(300)]]},{title:"Enabled",name:"moduleEnabled",dbName:"module_enabled",type:t.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.status,fieldFor:t.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Sys",name:"isSysModule",dbName:"is_sys_module",type:t.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.status,fieldFor:t.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[s.Validators.required]]},{title:"System Module",name:"isSys",controls:[{controlType:t.ControlType.toggleSwitch,fieldFor:t.FieldFor.createForm}],primaryField:"isSysModule",formControlsConfig:["",[]]},{title:"App Module",name:"isApp",controls:[{controlType:t.ControlType.toggleSwitch,fieldFor:t.FieldFor.createForm}],primaryField:"isSysModule",formControlsConfig:["",[]]},{title:"Action",name:"action",type:t.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:t.ControlType.action,fieldFor:t.FieldFor.createForm},{controlType:t.ControlType.action,fieldFor:t.FieldFor.tableDisplay}]}],y={controllerName:"isSysModule",selectedItem:{index:0,optControlId:"",value:"",selected:!1},controlTypes:t.ControlType.toggleSwitch,options:[{index:0,optControlId:"isSys",value:"isSys",selected:!0},{index:1,optControlId:"isApp",value:"isApp",selected:!1}]},e={valid:null,data:{},ctx:"Sys"},d={token:"",stepTitle:"Create Module",stepItems:{nextButtonId:"stepToMenu"},tabPaneId:"moduleInfo",cardTitle:"Module Information",cardTitleDesc:"Fill all information below",module:"moduleman",controller:"module",formGroup:null,fields:g.filterByFieldFor(T,t.FieldFor.createForm)},f={name:"Module Wizard",steps:[d,p.pt]},b=[{menuName:"create",menuGuid:"bd9b5bda5ab",navLocation:"/moduleman/module/create",actionType:t.ActionType.navigate},{menuName:"dashboard",menuGuid:"d27294db59c1",navLocation:"/moduleman/module/dashboard",actionType:t.ActionType.navigate}],F={select:["moduleId","moduleName","moduleGuid"],where:{}},I={getFn$:null,selIndex:F.select[0],selValueField:F.select[1],fetchFields:F.select,step:null,token:null,controlName:"moduleId"}},7444:(S,v,a)=>{a.d(v,{N:()=>T});const s="https://cd-api.co.ke",T={appId:"",production:!1,apiEndpoint:`${s}:3001/api`,sioEndpoint:`${s}:3002`,wsEndpoint:"ws://cd-api.co.ke:3000",wsMode:"sio",pushConfig:{sio:{enabled:!0},wss:{enabled:!1},pusher:{enabled:!0,apiKey:"DtVRY9V5j41KwSxKrd8L_dRijUJh9gVcqwBH5wb96no",options:{cluster:"ap2",forceTLS:!0,userAuthentication:{endpoint:"https://cd-api.co.ke:3002/pusher/auth",transport:"ajax",params:{},headers:{},includeCredentials:!0,customHandler:null},channelAuthorization:{endpoint:"https://cd-api.co.ke:3002/pusher/auth"},authEndpoint:"https://cd-api.co.ke:3002/pusher/auth"}}},CD_PORT:3001,consumerToken:"B0B3DA99-1859-A499-90F6-1E3F69575DCD",USER_RESOURCES:"http://routed-93/user-resources",apiHost:"https://cd-api.co.ke",sioHost:"https://cd-api.co.ke",shellHost:"https://asdap.net",consumer:"",clientAppGuid:"ca0fe39f-92b2-484d-91ef-487d4fc462a2",clientContext:{entity:"ASDAP",clientAppId:2,consumerToken:"B0B3DA99-1859-A499-90F6-1E3F69575DCD"},clientAppId:2,SOCKET_IO_PORT:3002,defaultauth:"cd-auth",initialPage:"dashboard",mfManifestPath:"/assets/mf.manifest.json",apiOptions:{headers:{"Content-Type":"application/json"}},sioOptions:{path:"/socket.io",transports:["websocket","polling"],secure:!0},firebaseConfig:{apiKey:"",authDomain:"",databaseURL:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""}}},15861:(S,v,a)=>{function s(t,C,p,g,T,y,e){try{var n=t[y](e),d=n.value}catch(f){return void p(f)}n.done?C(d):Promise.resolve(d).then(g,T)}function o(t){return function(){var C=this,p=arguments;return new Promise(function(g,T){var y=t.apply(C,p);function e(d){s(y,g,T,e,n,"next",d)}function n(d){s(y,g,T,e,n,"throw",d)}e(void 0)})}}a.d(v,{Z:()=>o})}}]);