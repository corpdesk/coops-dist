(self.webpackChunkcoops=self.webpackChunkcoops||[]).push([[4972],{4972:(y,m,h)=>{h.r(m),h.d(m,{NGX_ECHARTS_CONFIG:()=>c,NgxEchartsDirective:()=>g,NgxEchartsModule:()=>l,provideEcharts:()=>p,provideEchartsCore:()=>o});var d=h(467),s=h(2264),n=h(4866),u=h(2778);class v{constructor(){this.subject=new n.ReplaySubject(1),this.subscriptions=new n.Subscription}doFilter(a){this.subject.next(a)}dispose(){this.subscriptions.unsubscribe()}notEmpty(a,e){this.subscriptions.add(this.subject.subscribe(t=>{if(t[a]){const r=t[a].currentValue;null!=r&&e(r)}}))}has(a,e){this.subscriptions.add(this.subject.subscribe(t=>{t[a]&&e(t[a].currentValue)}))}notFirst(a,e){this.subscriptions.add(this.subject.subscribe(t=>{t[a]&&!t[a].isFirstChange()&&e(t[a].currentValue)}))}notFirstAndEmpty(a,e){this.subscriptions.add(this.subject.subscribe(t=>{if(t[a]&&!t[a].isFirstChange()){const r=t[a].currentValue;null!=r&&e(r)}}))}}const c=new s.InjectionToken("NGX_ECHARTS_CONFIG");let g=(()=>{class i{constructor(e,t,r){this.el=t,this.ngZone=r,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new s.EventEmitter,this.optionsError=new s.EventEmitter,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartHighlight=this.createLazyEvent("highlight"),this.chartDownplay=this.createLazyEvent("downplay"),this.chartSelectChanged=this.createLazyEvent("selectchanged"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendLegendSelectAll=this.createLazyEvent("legendselectall"),this.chartLegendLegendInverseSelect=this.createLazyEvent("legendinverseselect"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartGraphRoam=this.createLazyEvent("graphroam"),this.chartGeoRoam=this.createLazyEvent("georoam"),this.chartTreeRoam=this.createLazyEvent("treeroam"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartGeoSelectChanged=this.createLazyEvent("geoselectchanged"),this.chartGeoSelected=this.createLazyEvent("geoselected"),this.chartGeoUnselected=this.createLazyEvent("geounselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartGlobalCursorTaken=this.createLazyEvent("globalcursortaken"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new n.ReplaySubject(1),this.resize$=new n.Subject,this.changeFilter=new v,this.resizeObFired=!1,this.echarts=e.echarts,this.theme=e.theme||null}ngOnChanges(e){this.changeFilter.doFilter(e)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe((0,u.throttleTime)(100,n.asyncScheduler,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(e=>{for(const t of e)t.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",e=>this.onOptionsChange(e)),this.changeFilter.notFirstAndEmpty("merge",e=>this.setOption(e)),this.changeFilter.has("loading",e=>this.toggleLoading(!!e)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(e){this.chart?e?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(t=>e?t.showLoading(this.loadingType,this.loadingOpts):t.hideLoading())}setOption(e,t){if(this.chart)try{this.chart.setOption(e,t)}catch(r){console.error(r),this.optionsError.emit(r)}}refreshChart(){var e=this;return(0,d.A)(function*(){e.dispose(),yield e.initChart()})()}createChart(){const e=this.el.nativeElement;if(window&&window.getComputedStyle){const t=window.getComputedStyle(e,null).getPropertyValue("height");(!t||"0px"===t)&&(!e.style.height||"0px"===e.style.height)&&(e.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:r})=>r(e,this.theme,this.initOpts)))}initChart(){var e=this;return(0,d.A)(function*(){yield e.onOptionsChange(e.options),e.merge&&e.chart&&e.setOption(e.merge)})()}onOptionsChange(e){var t=this;return(0,d.A)(function*(){e&&(t.chart||(t.chart=yield t.createChart(),t.chart$.next(t.chart),t.chartInit.emit(t.chart)),t.setOption(t.options,!0))})()}createLazyEvent(e){return this.chartInit.pipe((0,u.switchMap)(t=>new n.Observable(r=>(t.on(e,E=>this.ngZone.run(()=>r.next(E))),()=>{this.chart&&(this.chart.isDisposed()||t.off(e))}))))}static#e=this.\u0275fac=function(t){return new(t||i)(s.\u0275\u0275directiveInject(c),s.\u0275\u0275directiveInject(s.ElementRef),s.\u0275\u0275directiveInject(s.NgZone))};static#t=this.\u0275dir=s.\u0275\u0275defineDirective({type:i,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],standalone:!0,features:[s.\u0275\u0275NgOnChangesFeature]})}return i})();const p=(i={})=>({provide:c,useFactory:()=>({...i,echarts:()=>h.e(3581).then(h.t.bind(h,3581,19))})}),o=i=>({provide:c,useValue:i});let l=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[o(e)]}}static forChild(){return{ngModule:i}}static#e=this.\u0275fac=function(t){return new(t||i)};static#t=this.\u0275mod=s.\u0275\u0275defineNgModule({type:i});static#i=this.\u0275inj=s.\u0275\u0275defineInjector({})}return i})()},467:(y,m,h)=>{function d(n,u,v,c,g,p,o){try{var l=n[p](o),i=l.value}catch(a){return void v(a)}l.done?u(i):Promise.resolve(i).then(c,g)}function s(n){return function(){var u=this,v=arguments;return new Promise(function(c,g){var p=n.apply(u,v);function o(i){d(p,c,g,o,l,"next",i)}function l(i){d(p,c,g,o,l,"throw",i)}o(void 0)})}}h.d(m,{A:()=>s})}}]);